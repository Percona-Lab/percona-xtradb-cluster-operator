apiVersion: "pxc.percona.com/v1alpha1"
kind: "PerconaXtraDBCluster"
metadata:
  name: "cluster1"
spec:
  secretsName: my-cluster-secrets
  pxc:
    size: 3
    image: perconalab/pxc-openshift:0.1.0 
    resources:
      requests:
        memory: 1G
        cpu: 600m
      # limits:
      #   memory: 1G
      #   cpu: "1"
    volumeSpec:
      # storageClass: standard
      accessModes: [ "ReadWriteOnce" ]
      size: 6Gi
    affinity:
      topologyKey: "failure-domain.beta.kubernetes.io/zone"
      # advanced:
  proxysql:
    enabled: true
    size: 1
    image: perconalab/proxysql-openshift:0.1.0
    resources:
      requests:
        memory: 1G
        cpu: 600m
      # limits:
      #   memory: 1G
      #   cpu: 700m
    volumeSpec:
      # storageClass: standard
      accessModes: [ "ReadWriteOnce" ]
      size: 2Gi
    # affinity:
    #   topologyKey: "failure-domain.beta.kubernetes.io/zone"
    #   # advanced:
  pmm:
    enabled: false
    image: perconalab/pmm-client:1.17.0
    serverHost: monitoring-service
    serverUser: pmm
  # backup:
  #   - name: "sat-night-backup"
  #     # schedule: "0 0 * * 6"
  #     schedule: "*/1 * * * *"
  #     keep: 3
  #     volume:
  #     # storageClass: standard
  #       size: 6Gi
